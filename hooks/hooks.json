{
  "hooks": {
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/hooks/scripts/idea-observer.sh",
            "timeout": 3
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/hooks/scripts/session-start.sh",
            "timeout": 10
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "BEFORE ending this session, you MUST complete this documentation checklist:\n\n1. **memory/MEMORY.md** — Update the project index: what changed this session, current state, key decisions. Keep under 200 lines.\n2. **memory/sessions.md** — Add a 1-3 line session summary with: goal, what was done, what's next.\n3. **memory/decisions.md** — If any design decisions were made, log them (context, decision, rationale).\n4. **memory/project-context.md** — If tech stack, priorities, or architecture changed, update it.\n5. **CHANGELOG.md** — If user-visible changes were made, add entries under current version.\n6. **docs/** — If features, APIs, setup, or architecture changed, update the affected docs.\n\nSkip files that genuinely don't need updates. But memory/MEMORY.md and memory/sessions.md MUST always be updated.\n\nAfter updating, commit and push all documentation changes with: git commit -m 'docs: update memory and project documentation'"
          },
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/hooks/scripts/session-stop.sh",
            "timeout": 5
          },
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/hooks/scripts/idea-flush.sh",
            "timeout": 5
          }
        ]
      }
    ],
    "SubagentStop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/hooks/scripts/subagent-stop.sh",
            "timeout": 5
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Context is about to be compacted. BEFORE compaction, you MUST save critical state:\n\n1. **memory/MEMORY.md** — Write current project state, what you were working on, pending tasks, key decisions made this session.\n2. **memory/sessions.md** — Add session summary so far: goal, progress, what's unfinished.\n3. **memory/decisions.md** — Log any undocumented decisions.\n\nThis information will be LOST after compaction if not saved now. Be thorough — future you depends on this.\n\nCommit and push after saving: git commit -m 'docs: pre-compact memory save'"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/hooks/scripts/safety-gate.sh",
            "timeout": 30
          },
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/hooks/scripts/commit-format.sh",
            "timeout": 10
          },
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/hooks/scripts/branch-naming.sh",
            "timeout": 10
          }
        ]
      }
    ]
  }
}
